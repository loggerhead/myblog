<!Doctype html>
<html lang="zh-cn">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">

<meta name="renderer" content="webkit">
<meta name="HandheldFriendly" content="True">
<meta name="google-site-verification" content="xRiYQAQ0h0n3RXqrq0GgrdFm3BMFqDvDwwiRylv0YhQ">

<link rel="apple-touch-icon" sizes="57x57" href="/apple-touch-icon-57x57.png">
<link rel="apple-touch-icon" sizes="60x60" href="/apple-touch-icon-60x60.png">
<link rel="apple-touch-icon" sizes="72x72" href="/apple-touch-icon-72x72.png">
<link rel="apple-touch-icon" sizes="76x76" href="/apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" sizes="114x114" href="/apple-touch-icon-114x114.png">
<link rel="apple-touch-icon" sizes="120x120" href="/apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" sizes="144x144" href="/apple-touch-icon-144x144.png">
<link rel="apple-touch-icon" sizes="152x152" href="/apple-touch-icon-152x152.png">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon-180x180.png">
<link rel="icon" type="image/png" href="/favicon-32x32.png" sizes="32x32">
<link rel="icon" type="image/png" href="/android-chrome-192x192.png" sizes="192x192">
<link rel="icon" type="image/png" href="/favicon-96x96.png" sizes="96x96">
<link rel="icon" type="image/png" href="/favicon-16x16.png" sizes="16x16">
<link rel="manifest" href="/manifest.json">
<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">

<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-TileImage" content="/mstile-144x144.png">
<meta name="theme-color" content="#ffffff">
<meta name="author" content="loggerhead" />    <meta name="keywords" content="LaTeX,Mac" />

  <meta name="description" content="本文的目标是让需要对中文论文进行排版的 OS X 用户安装配置好中文环境，编译示例得到 foo.pdf。 如果只需排版英文，那么中文配置部分可以跳过。 如果是 Linux/Unix 或 Windows 用户，将 Skim 换成相应的 pdf阅读器（LaTeXing 默认设置中有提及）后，LaTeXing 部分仍适用，但 MacTeX 部分不再适用。" />

  <title>  LaTeX 在 Mac 下的中文环境配置
</title>

<link rel="stylesheet" href="//cdn.bootcss.com/bootstrap/3.3.6/css/bootstrap.min.css">

  <link rel="stylesheet" href="../theme/css/style.1cd8932.css">
 
  <link rel="icon" type="image/x-icon" href="/favicon.ico">

  <link href="../atom.xml" rel="alternate" type="application/atom+xml">
</head>
<body>

<nav class="navbar navbar-default navbar-static-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="..">loggerhead's blog</a>
    </div>
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav">
        <li><a href="../index.html">首页</a></li>
        <li><a href="../archives.html">归档</a></li>
        <li><a href="../404.html">关于</a></li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li><a href="https://github.com/loggerhead" target="_blank">GitHub</a></li>
        <li><a href="https://www.hackerrank.com/loggerhead" target="_blank">HackerRank</a></li>
        <li><a href="https://douban.com/people/loggerhead" target="_blank">豆瓣</a></li>
      </ul>
    </div><!--/.navbar-header -->
  </div><!--/.container -->
</nav><!--/.navbar -->

<div class="container">
  <div class="row">
    <div class="col-md-12">
      <div class="markdown-body article-list">
  <section id="content">
    <article>
      <header class="page-header">
        <h1>
          <a class="article-title" href="../posts/latex-zai-mac-xia-de-zhong-wen-huan-jing-pei-zhi.html" rel="bookmark" title="Permalink to LaTeX 在 Mac 下的中文环境配置">
            LaTeX 在 Mac 下的中文环境配置
          </a>
        </h1>
<footer class="post-info">
  <div class="row">
    <div class="col-xs-8">
      <!-- <span class="label label-default">Tags</span> -->
        <a class="tag btn btn-xs" href="../tag/latex.html">
          LaTeX
        </a>
        <a class="tag btn btn-xs" href="../tag/mac.html">
          Mac
        </a>
    </div>

    <div class="col-xs-4 time">
      <time class="pull-right" datetime="2015-04-07T22:51:00+08:00">
        2015-04-07
      </time>
    </div>
  </div>
</footer>        <hr>
      </header>
      <div class="entry-content">
        <ul>
<li>本文的目标是让需要对<strong>中文</strong>论文进行排版的 <strong>OS X</strong> 用户安装配置好中文环境，编译示例得到 foo.pdf。</li>
<li>如果只需排版英文，那么中文配置部分可以跳过。</li>
<li>如果是 Linux/Unix 或 Windows 用户，将 Skim 换成相应的 pdf阅读器（LaTeXing 默认设置中有提及）后，LaTeXing 部分仍适用，但 MacTeX 部分不再适用。</li>
</ul>


<h1 id="_1">安装</h1>
<p>MacTeX 是必备的。Skim 和 <a href="http://www.latexing.com/features.html">LaTeXing</a> 虽说不是必须的，但是强烈推荐安装。后文会介绍它们的作用，先将它们安装好：</p>
<ul>
<li><a href="http://mirror.ctan.org/systems/mac/mactex/MacTeX.pkg">下载 MacTeX.pkg</a></li>
<li>使用 <a href="https://packagecontrol.io/">Package Control</a> 安装 LaTeXing 和 LaTeX-cwl，并重启 Sublime</li>
<li><a href="http://skim-app.sourceforge.net/">下载 Skim</a>。LaTeXing 需要与它（或者 <em>预览</em>）配合实现跳转到 pdf。</li>
</ul>
<p>在下载 MacTeX 的这段时间，我们可以先了解一下 LaTeXing。</p>
<h2 id="latexing">LaTeXing</h2>
<p>LaTeXing 是 <a href="https://www.sublimetext.com/3">Sublime</a> 的 LaTeX 插件，与之类似的还有 <a href="https://packagecontrol.io/packages/LaTeXTools">LaTeXTools</a>。两者功能类似，只不过 LaTeXing 更容易配置和使用，而且某些功能更加出色。它的特点包括：</p>
<ul>
<li>
<p>LaTeX 命令自动补全</p>
<p><img alt="auto complete" src="https://dn-loggerhead.qbox.me/images/latexing_autocomplete_1.png" /></p>
</li>
<li>
<p>丰富的 snippet</p>
<p><img alt="snippet" src="https://dn-loggerhead.qbox.me/images/snippet.png" /></p>
</li>
<li>
<p>填充引用、宏包、文档类型等任何东西</p>
<p><img alt="fill everything" src="https://dn-loggerhead.qbox.me/images/fill_everything.png" />
<img alt="fill cite" src="https://dn-loggerhead.qbox.me/images/latexing_fill_cite.png" /></p>
</li>
<li>
<p>快捷键跳转到生成的 pdf</p>
<p><img alt="pdf result" src="https://dn-loggerhead.qbox.me/images/pdf_result.png" /></p>
</li>
<li>
<p>可读性更高的出错提示</p>
<p><img alt="error" src="https://dn-loggerhead.qbox.me/images/error.png" /></p>
</li>
</ul>
<p>注意：</p>
<ul>
<li>自动补全功能需要安装 LaTeXing 的插件——<a href="https://packagecontrol.io/packages/LaTeX-cwl">LaTeX-cwl</a></li>
<li>
<p>跳转 pdf 需要照下图设置 Skim</p>
<p><img alt="skim config" src="https://dn-loggerhead.qbox.me/images/skim_config.png" /></p>
</li>
<li>
<p>双击出错信息可以跳转到出错行</p>
</li>
</ul>
<h1 id="_2">中文配置</h1>
<h2 id="_3">安装中文字体</h2>
<p><a href="https://coding.net/u/loggerhead/p/fonts/git/archive/master">下载 STXihei、STSong、STKaiti、STHeiti、STFangsong</a>，双击它们，系统会调用字体册（Font Book）打开它们，点击安装即可。</p>
<h2 id="mactex">配置 MacTeX</h2>
<p>在终端输入</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>sudo vim <span class="sb">`</span>mdfind ctex-xecjk-winfonts.def <span class="p">|</span> egrep <span class="s2">&quot;texlive/\d{4}/texmf-dist/tex/latex/ctex/fontset/ctex-xecjk-winfonts.def&quot;</span><span class="sb">`</span>
</pre></div>
</td></tr></table>

<p>将 <em>ctex-xecjk-winfonts.def</em> 文件修改成：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c">% ctex-xecjk-winfonts.def: Windows 的 xeCJK 字体设置，默认为六种中易字体</span>
<span class="k">\setCJKmainfont</span><span class="na">[BoldFont={STHeiti},ItalicFont=STKaiti]</span><span class="nb">{</span>STSong<span class="nb">}</span>
<span class="k">\setCJKsansfont</span><span class="nb">{</span>STHeiti<span class="nb">}</span>
<span class="k">\setCJKmonofont</span><span class="nb">{</span>STFangsong<span class="nb">}</span>

<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhsong<span class="nb">}{</span>STSong<span class="nb">}</span>
<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhhei<span class="nb">}{</span>STHeiti<span class="nb">}</span>
<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhkai<span class="nb">}{</span>STKaiti<span class="nb">}</span>
<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhfs<span class="nb">}{</span>STFangsong<span class="nb">}</span>
<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhli<span class="nb">}{</span>LiSu<span class="nb">}</span>
<span class="k">\setCJKfamilyfont</span><span class="nb">{</span>zhyou<span class="nb">}{</span>YouYuan<span class="nb">}</span>

<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\songti</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhsong<span class="nb">}}</span> <span class="c">% 宋体</span>
<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\heiti</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhhei<span class="nb">}}</span>   <span class="c">% 黑体</span>
<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\kaishu</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhkai<span class="nb">}}</span>  <span class="c">% 楷书</span>
<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\fangsong</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhfs<span class="nb">}}</span> <span class="c">% 仿宋</span>
<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\lishu</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhli<span class="nb">}}</span>    <span class="c">% 隶书</span>
<span class="k">\newcommand*</span><span class="nb">{</span><span class="k">\youyuan</span><span class="nb">}{</span><span class="k">\CJKfamily</span><span class="nb">{</span>zhyou<span class="nb">}}</span> <span class="c">% 幼圆</span>

<span class="k">\endinput</span>
</pre></div>
</td></tr></table>

<h2 id="latexing_1">配置 LaTeXing</h2>
<p>点击</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span>Sublime Text =&gt; Preferences =&gt; Package Settings =&gt; LaTeXing =&gt; Settings - User
</pre></div>
</td></tr></table>

<p>打开 LaTeXing.sublime-settings，填入以下内容：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;debug&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="s2">&quot;fallback_encoding&quot;</span><span class="o">:</span> <span class="s2">&quot;utf_8&quot;</span><span class="p">,</span>
    <span class="c1">// 打开.tex的同时打开.pdf文件</span>
    <span class="s2">&quot;open_pdf_on_load&quot;</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
    <span class="c1">// 某些宏包需要这个参数，如：minted</span>
    <span class="s2">&quot;build_arguments&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;-shell-escape&quot;</span><span class="p">],</span>
    <span class="c1">// 使用xelatex而不是pdflatex进行编译</span>
    <span class="s2">&quot;quick_build&quot;</span><span class="o">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Default Build: latexmk&quot;</span><span class="p">,</span>
            <span class="s2">&quot;primary&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
            <span class="s2">&quot;cmds&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;xelatex&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Quick Build 1: xelatex + bibtex + xelatex (2x)&quot;</span><span class="p">,</span>
            <span class="s2">&quot;cmds&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;xelatex&quot;</span><span class="p">,</span> <span class="s2">&quot;bibtex&quot;</span><span class="p">,</span> <span class="s2">&quot;xelatex&quot;</span><span class="p">,</span> <span class="s2">&quot;xelatex&quot;</span><span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="o">:</span> <span class="s2">&quot;Quick Build 2: xelatex + biber + xelatex (2x)&quot;</span><span class="p">,</span>
            <span class="s2">&quot;cmds&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;xelatex&quot;</span><span class="p">,</span> <span class="s2">&quot;biber&quot;</span><span class="p">,</span> <span class="s2">&quot;xelatex&quot;</span><span class="p">,</span> <span class="s2">&quot;xelatex&quot;</span><span class="p">]</span>
        <span class="p">}</span>
    <span class="p">],</span>
<span class="p">}</span>
</pre></div>
</td></tr></table>

<h2 id="_4">测试</h2>
<p>用 Sublime 创建 foo.tex，输入以下内容并保存：</p>
<table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">\documentclass</span><span class="nb">{</span>minimal<span class="nb">}</span>
<span class="k">\usepackage</span><span class="nb">{</span>xeCJK<span class="nb">}</span>
<span class="k">\setCJKmainfont</span><span class="na">[BoldFont=STHeiti,ItalicFont=STKaiti]</span><span class="nb">{</span>STSong<span class="nb">}</span>
<span class="k">\setCJKsansfont</span><span class="na">[BoldFont=STHeiti]</span><span class="nb">{</span>STXihei<span class="nb">}</span>
<span class="k">\setCJKmonofont</span><span class="nb">{</span>STFangsong<span class="nb">}</span>
<span class="k">\begin</span><span class="nb">{</span>document<span class="nb">}</span>
你好，世界
<span class="k">\end</span><span class="nb">{</span>document<span class="nb">}</span>
</pre></div>
</td></tr></table>

<p>按 <code>Cmd+B</code> 进行编译（3083以上版本的 sublime 在弹出框中选择 <code>LaTeX - Primary Quick Build</code> 作为默认编译方式），如果配置成功，控制台的输出应该是这样</p>
<p><img alt="compile result" src="https://dn-loggerhead.qbox.me/images/compile_result.png" /></p>
<p>按 <code>Cmd+L Cmd+J</code> 跳转到生成的 foo.pdf（红点是 .tex 文件改动的地方）。</p>
<p><img alt="pdf result" src="https://dn-loggerhead.qbox.me/images/pdf_result.png" /></p>
<p>如果没能成功编译出 foo.pdf，那么问题很可能是：</p>
<ul>
<li>没有安装相应的中文字体</li>
<li>foo.tex 的文件编码不是 UTF-8。如果你不能确定文件编码，点击 <em>File =&gt; Save with Encoding =&gt; UTF-8</em> </li>
<li>LaTeXing 使用 pdflatex 而不是 xelatex 进行编译</li>
</ul>
<p>为了确定问题的所在，我们在终端输入命令 <code>xelatex foo.tex</code>。</p>
<ol>
<li>如果能生成 foo.pdf，那么是 LaTeXing 没有配置正确。</li>
<li>如果 xelatex 输出一堆错误信息，那么是中文字体没有安装或配置成功。</li>
<li>
<p>如果提示 xelatex 命令不存在，输入： </p>
<p><code>bash
sudo ln -s /Library/TeX/Distributions/Programs/texbin/xelatex /usr/xelatex</code></p>
<p>重启终端，重新输入 <code>xelatex foo.tex</code></p>
</li>
</ol>
<h1 id="faq">FAQ</h1>
<h2 id="tex-latex">TeX 与 LaTeX</h2>
<p>TeX 不仅是一个排版程序，而且是一种程序语言。LaTeX 就是用这种语言写成的一个"TeX 宏包"，它扩展了 TeX 的功能，使我们很方便的逻辑的进行创作而不是专心于字体，缩进这些烦人的东西。类似 C++ 与 MFC、Ruby 与 Ruby on Rails 的关系。</p>
<h2 id="latex-latex2e">LaTeX 与 LaTeX2e</h2>
<p>LaTeX2 <span class="math">\varepsilon</span> 是 LaTeX 目前的版本。以前的 LaTeX 叫做 LaTeX 2.09。现在随便下载一个 TeX 系统，里面带的 LaTeX 都是 LaTeX2 <span class="math">\varepsilon</span>。</p>
<h2 id="mactex-miktex">MacTeX 与 MikTeX</h2>
<p>不同的 TeX 发行版本而已，比如 OS X 下有 MacTeX，Windows 下有 MikTeX，Linux/UNIX 下有 teTeX 和 TeX Live。TeX 与它们的关系就像 Linux 内核与 Debian、Redhat、Arch 的关系一样。所以每个 TeX 发行版里都包含了 TeX，LaTeX 等等。</p>
<h2 id="latex-cjkxecjk">LaTeX 与 CJK、xeCJK</h2>
<p>CJK、xeCJK 都是 LaTeX 的宏包，MacTeX.pkg 里面已经包含了它们，不必再自行安装。</p>
      </div>
    </article>
  </section>
<div id="disqus_thread"></div>
<script>
var disqus_config = function () {
    this.page.identifier = "LaTeX 在 Mac 下的中文环境配置";
};

(function() {
    var d = document, s = d.createElement('script');
    s.async = true;
    s.src = "//loggerhead.disqus.com/embed.js";
    s.setAttribute('data-timestamp', +new Date());
    (d.head || d.body).appendChild(s);
})();
</script>      </div>
    </div>
  </div>
</div>

 <footer class="page-footer">
  <div class="container">
    <div class="row">
      <div class="col-xs-8">
        <p>
          &copy;2016&nbsp; <a href="..">loggerhead</a>
        </p>
      </div>
      <div class="col-xs-4">
        <p class="pull-right">
          <a href="#" class="back-to-top">
            <span class="glyphicon glyphicon-arrow-up" aria-hidden="true"></span>
            回到顶部
          </a>
        </p>
      </div>
    </div>

    <div class="row hidden-when-phone">
      <div class="col-xs-8">
        <p>
          <a href="http://www.miitbeian.gov.cn/" target="_blank">粤ICP备16007488号</a>
          &middot; Powered by <a href="https://github.com/getpelican/pelican" target="_blank">Pelican</a>
        </p>

        <p>
          本站文章均为原创，并遵循 <a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh_TW" target="_blank">CC BY-SA 4.0 协议</a>
        </p>
      </div><!--/.col-xs-8 -->

      <div class="col-xs-4">
        <p class="pull-right">
          <a href="https://www.upyun.com/zh/league.html" target="_blank">
            <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAAAtCAMAAAAZUYxJAAAAtFBMVEUAAABPrtxPrtxPrtxPrtxPrtxlZ2ZlZ2ZPrtxlZ2ZRqdRlZ2ZPrtxPrtxPrtxPrtxPrtxlZ2ZPrtxlZ2ZPrtxPrtxPrtxPrtxPrtxPrtxPrtxPrtxPrtxPrtxPrtxPrtxlZ2ZPrtxPrtxPrtxlZ2ZlZ2ZPrtxlZ2ZlZ2ZPrtxPrtxlZ2ZlZ2ZlZ2ZlZ2ZlZ2ZPrtxPrtxlZ2ZPrtxlZ2ZlZ2ZlZ2ZPrtxPrtxlZ2ZPrtxlZ2bPPWi/AAAAOnRSTlMAgNCQ8aAQcD8fA/FPMevhsDD5wLp1cCHZypmHOwyrooFTGhLh0sSwinlfXfju67yMRyfcooZ4RS0XProUtAAAAZlJREFUSMft02tT4jAUxvHTNtAaobjd3iyUq1zE1V1dr0++//fypMGZCrbw1jG/N2nD8KcTTsmyLOvH6sUC4Tio7fxWyufll1KKqKu0P7fLpy7veUCHlwAAfxMYELsAHKIOtCiMe2TICQxPNqeNq7OjaWNGlX+Ixo4TAxg2p6e+/8jL32PpVZomLnBJWhZdzomNQiBrTJ/x3Y1ej6Q9XQIi0tJwQZUAGC7KlrS8VermhHS/+khuR8U17cRg+bYxTUvePTUtL+5p0iejdIJ5vwCKxqc+3z315IR0wsftLMgwB51Uf+9aqc1B2uf1gYbAapc2x1p+mc4nfDGnOikQE015jje+v6lNyPPaTMgMQJGmXpUuIyBO0tQ9SFdDIumTAf4Tvd0p43CupYsP1eQaB2mBF9oTmKF8WF+dGybNF3fLaZfYYpgLAGbCZOIKg6ehEEK/Gq98R2OIraS6Xqh//zNz1ntmQEgtMgGEbg2HkZet6Z6ndQbAmNr0c+xbZdSa9rATZtRK3l87dcmIqD2duJXYmZNlWZb17b0DTmto7227YPgAAAAASUVORK5CYII=" />
          </a>
        </p>
      </div>
    </div>
  </div>
</footer>
    <script src="../theme/js/bag.2.0.2.min.js"></script>

<script id="myscripts">
bag = new window.Bag();

bag.require([
    "//cdn.bootcss.com/jquery/2.2.1/jquery.min.js",
    "//cdn.bootcss.com/bootstrap/3.3.6/js/bootstrap.min.js"
]);

function load_css(url, done) {
    var link  = document.createElement('link');
    link.rel  = 'stylesheet';
    link.href = url;
    link.onload = done;
    document.head.appendChild(link);
}

function load_js(url, done) {
    var script = document.createElement('script');
    script.src = url;
    script.onload = done;
    document.body.appendChild(script);
}

function gestureStart() {
    for (i = 0; i < metas.length; i++) {
        if (metas[i].name == "viewport") {
            metas[i].content = "width=device-width, minimum-scale=0.25, maximum-scale=1.6";
        }
    }
}

(function screen_suit() {
    var metas = document.getElementsByTagName('meta');
    var ua = navigator.userAgent;
    if (ua.match(/iPhone/i)) {
        for (var i = 0; i < metas.length; i++) {
            if (metas[i].name == "viewport") {
                metas[i].content = "width=device-width, minimum-scale=1.0, maximum-scale=1.0";
            }
        }
        document.addEventListener("gesturestart", gestureStart, false);
    }
})();

// See https://gist.github.com/vartan/ab195e5a502a47e0c3e5
(function fix_hover_behavior() {
    if('ontouchstart' in document.documentElement) {
        for(var sheetI = document.styleSheets.length - 1; sheetI >= 0; sheetI--) {
            var sheet = document.styleSheets[sheetI];
            if(sheet.cssRules) {
                for(var ruleI = sheet.cssRules.length - 1; ruleI >= 0; ruleI--) {
                    var rule = sheet.cssRules[ruleI];
                    if(rule.selectorText) {
                        rule.selectorText = rule.selectorText.replace(":hover", ":active");
                    }
                }
            }
        }
    }
})();

(function add_class_to_chinese_em(class_name) {
    var ems = document.getElementsByTagName("em");

    for (var i = 0; i < ems.length; i++) {
        var text = ems[i].textContent;
        // if has chinese char
        if(/.*[\u4e00-\u9fa5]+.*$/.test(text)) {
            ems[i].className += " " + class_name;
        }
    }
})('chinese');

// IE10 viewport hack for Surface/desktop Windows 8 bug
(function fix_ie10_viewport_bug() {
    if (navigator.userAgent.match(/IEMobile\/10\.0/)) {
        bag.require([
            "//maxcdn.bootstrapcdn.com/css/ie10-viewport-bug-workaround.css",
            "//maxcdn.bootstrapcdn.com/js/ie10-viewport-bug-workaround.js"
        ]);
    }
})();

(function load_katex_when_need(class_name) {
    var maths = document.getElementsByClassName(class_name);
    if (maths.length == 0) {
        return;
    }

    bag.require([
        "//cdn.bootcss.com/KaTeX/0.6.0/katex.min.js"
    ]).then(function() {
        for (var i = 0; i < maths.length; i++) {
            var math = maths[i];

            var displayMode = null;
            if (math.tagName == "SPAN") {
                displayMode = false;
            } else if (math.tagName == "DIV") {
                displayMode = true;
            }

            if (displayMode === null) {
                console.log("Cannot render " + math);
            } else {
                try {
                    katex.render(math.textContent, maths[i], { displayMode: displayMode });
                } catch (err) {
                    console.log(err);
                }
            }
        }
    });

    load_css("//cdn.bootcss.com/KaTeX/0.6.0/katex.min.css");
})("math");
</script>

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!--[if lt IE 9]>
  <script>
  bag.require([
    "//cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js",
    "//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"
  ]);
  </script>
<![endif]-->
 
</body>
</html>